<!doctype html>
<html lang="en">
	<head>
		<title>O'Reilly Introduction to WebRTC</title>
	</head>
	<body>
		<video autoplay></video>
		<script>
			navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUseerMedia||navigator.mozGetUserMedia;
			/*var constraints={
				audio:true,
				video:true};*/
			var constraints={
				audio:true,
				video:{
					mandatory:{
						minWidth:640,
						maxWidth:640,
						minHeight:360,
						maxHeight:480
					}
				}
			};	
			var videoArea=document.querySelector("video");

			function onSuccess(stream){
				console.log("Success! We have a stream");
				//eprecated API
				//videoArea.src=window.URL.createObjectURL(stream);
				videoArea.srcObject = stream;	
				videoArea.play();
			}

			function onError(stream){
				constraints.log("Error with getUserMedia: ",error);
			}

			navigator.getUserMedia(constraints,onSuccess,onError);
		</script>
	</body>
</html>
